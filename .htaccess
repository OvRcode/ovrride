# Protect system files from peeping eyes
<FilesMatch "php.ini|error_log|README.md|readme.html|register.php">
  Order allow,deny
  Deny from all
</FilesMatch>

# RewriteEngine on - must be declared at least once before any Rewrites rules

# BEGIN W3TC CDN
<FilesMatch "\.(ttf|ttc|otf|eot|woff|font.css)$">
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch>
# END W3TC CDN
# BEGIN W3TC Browser Cache
<IfModule mod_deflate.c>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
        AddOutputFilterByType DEFLATE text/css text/x-component application/x-javascript application/javascript text/javascript text/x-js text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
    <IfModule mod_mime.c>
        # DEFLATE by extension
        AddOutputFilter DEFLATE js css htm html xml
    </IfModule>
</IfModule>
# END W3TC Browser Cache
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

# Rewrite WordPress /login to /wp-login.php
RewriteRule ^login$ https://ovrride.com/wp-login.php [NC,L]

# Prevent indexing of directories without an index file
Options -Indexes

# Protect the .git directory from peeping eyes
RedirectMatch 404 /\.git

# Rewrite ovrride.net to ovrride.com
RewriteCond %{HTTP_HOST} ^ovrride\.net$ [OR]
RewriteCond %{HTTP_HOST} ^www\.ovrride\.net$
RewriteRule ^(.*)$ "http\:\/\/ovrride\.com\/$1" [R=301,L]

# Redirect calendar.ovrride.com to ovrride.com/events
RewriteCond %{HTTP_HOST} ^calendar\.ovrride\.com
RewriteRule ^(.*) http://ovrride.com/events/ [L,R=301]

# File type for HTML 5 offline cache
AddType text/cache-manifest .manifest

# Redirect ovrride.com/lists
RewriteRule ^lists$ http://lists.ovrride.com/ [R=301,L]

# Redirect ovrride.com/beta
RewriteRule ^beta$ http://beta.ovrride.com/ [R=301,L]
