function showHideStock(StockType){var selector="",cssElement="";switch(StockType){case"primary":selector=jQuery("#_wc_trip_primary_package_stock"),cssElement=jQuery(".primary_package_stock");break;case"secondary":selector=jQuery("#_wc_trip_secondary_package_stock"),cssElement=jQuery(".secondary_package_stock");break;case"tertiary":selector=jQuery("#_wc_trip_tertiary_package_stock"),cssElement=jQuery(".tertiary_package_stock")}selector.prop("checked")?(cssElement.css("visibility","visible"),jQuery(".sorting").css("width","2%"),jQuery(".description").css("width","54%"),jQuery(".cost").css("width","22%"),jQuery(".primary_package_stock, .secondary_package_stock, .tertiary_package_stock").css("width","20%"),jQuery(".delete_column").css("width","2%")):(cssElement.css("visibility","collapse"),jQuery(".sorting").css("width","2%"),jQuery(".description").css("width","59%"),jQuery(".cost").css("width","27%"),jQuery(".primary_package_stock, .secondary_package_stock, .tertiary_package_stock").css("width","0"),jQuery(".delete_column").css("width","2%"))}function pickup_row_indexes(){jQuery(".woocommerce_trip_pickup_locations .woocommerce_trip_pickup_location").each(function(index,el){jQuery(".pickup_location_menu_order",el).val(parseInt(jQuery(el).index(".woocommerce_trip_pickup_locations .woocommerce_trip_pickup_location")))})}jQuery(document).ready(function($){$("#_wc_trip_start_date, #_wc_trip_end_date").datepicker({changeMonth:!0,changeYear:!0}),$("#_wc_trip_base_price").change(function(){var valid=/^\d{0,4}(\.\d{0,2})?$/.test(this.value);this.value;valid||alert("Please enter a valid price")}),$("#_wc_trip_end_date").change(function(){var start=$("#_wc_trip_start_date"),end=$(this);end.val()<start.val()&&(end.val(""),end.focus(),alert("Please set an end date that is greater than or equal to the start date"))}),showHideStock("primary"),showHideStock("secondary"),showHideStock("tertiary"),$("#_wc_trip_primary_package_stock").change(function(){showHideStock("primary")}),$("#_wc_trip_secondary_package_stock").change(function(){showHideStock("secondary")}),$("#_wc_trip_tertiary_package_stock").change(function(){showHideStock("tertiary")}),$(".add_package").click(function(){"primary_package_add"==$(this).prop("id")?($("table.woocommerce_trip_primary_packages").append($(this).data("row")),showHideStock("primary")):"secondary_package_add"==$(this).prop("id")?($("table.woocommerce_trip_secondary_packages").append($(this).data("row")),showHideStock("secondary")):"tertiary_package_add"==$(this).prop("id")&&($("table.woocommerce_trip_tertiary_packages").append($(this).data("row")),showHideStock("tertiary")),$(".sorter:visible").size()>1&&$(".sorter:visible").css("visibility","visible")}),$("button.add_pickup").on("click",function(){$(".woocommerce_trip_pickup_locations").block({message:null,overlayCSS:{background:"#ffffff url("+wc_trips_admin_js_params.plugin_url+"/assets/images/select2-spinner.gif) no-repeat center",opacity:.6}});var pickupCount=$(".woocommerce_trip_pickup_location").size(),new_pickup_id=$(".add_pickup_location_id").val(),new_pickup_name="";if(!new_pickup_id&&(new_pickup_name=prompt("New Pickup Location Name: "),!new_pickup_name))return!1;var post_data={action:"woocommerce_add_pickup_location",post_id:wc_trips_admin_js_params.post,pickupCount:pickupCount,new_pickup_id:new_pickup_id,new_pickup_name:new_pickup_name,nonce:wc_trips_admin_js_params.nonce_add_pickup_location};return $.post(wc_trips_admin_js_params.ajax_url,post_data,function(response){response.error?(alert(response.error),$(".woocommerce_trip_pickup_locations").unblock()):($(".woocommerce_trip_pickup_locations").append(response.html).unblock(),$(".woocommerce_trip_pickup_locations").sortable(pickup_sortable_options),new_pickup_id&&$(".new_pickup_id").find("option[value="+new_pickup_id+"]").remove())}),!1}),$("button.remove_trip_pickup_location").on("click",function(e){e.preventDefault();var checkRemove=confirm("Are you sure you want to remove this location?"),entry=$(this).parent().parent();if(checkRemove){$(entry).block({message:null,overlayCSS:{background:"#ffffff url("+wc_trips_admin_js_params.plugin_url+"/assets/images/select2-spinner.gif) no-repeat center",opacity:.6}});var removeData={action:"woocommerce_remove_pickup_location",post_id:wc_trips_admin_js_params.post,location_id:$(this).attr("rel"),nonce:wc_trips_admin_js_params.nonce_remove_pickup_location};$.post(wc_trips_admin_js_params.ajax_url,removeData,function(response){response.removed?$(entry).fadeOut("400",function(){$(entry).remove()}):($(entry).unblock(),response.error&&alert(response.error))})}return!1}),$("body").on("click","td.delete",function(){return $(this).closest("tr").remove(),$(".sorter:visible").size()<=1&&$(".sorter:visible").css("visibility","hidden"),!1});var pickup_sortable_options={items:".woocommerce_trip_pickup_location",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(event,ui){ui.item.css("background-color","#f6f6f6")},stop:function(event,ui){ui.item.removeAttr("style"),pickup_row_indexes()}};$(".woocommerce_trip_pickup_locations").sortable(pickup_sortable_options),$("#primary_package_rows, #secondary_package_rows, #tertiary_package_rows").sortable({items:"tr",cursor:"move",axis:"y",handle:".sorter",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(event,ui){ui.item.css("background-color","#f6f6f6")},stop:function(event,ui){ui.item.removeAttr("style")}}),$(".sorter:visible").size()<=1&&$(".sorter:visible").css("visibility","hidden")});