function showHideStock(t){var e="",a=""
switch(t){case"primary":e=jQuery("#_wc_trip_primary_package_stock"),a=jQuery(".primary_package_stock")
break
case"secondary":e=jQuery("#_wc_trip_secondary_package_stock"),a=jQuery(".secondary_package_stock")
break
case"tertiary":e=jQuery("#_wc_trip_tertiary_package_stock"),a=jQuery(".tertiary_package_stock")}e.prop("checked")?a.show():a.hide()}function pickup_row_indexes(){jQuery(".woocommerce_trip_pickup_locations .woocommerce_trip_pickup_location").each(function(t,e){jQuery(".pickup_location_menu_order",e).val(parseInt(jQuery(e).index(".woocommerce_trip_pickup_locations .woocommerce_trip_pickup_location"))),console.log(jQuery(".pickup_location_menu_order",e).val(parseInt(jQuery(e).index(".woocommerce_trip_pickup_locations .woocommerce_trip_pickup_location"))))})}jQuery(document).ready(function(t){function e(e){selector=t("#_wc_trip_"+e+"_package_optional"),cssElement=t("."+e+"_default"),selector.prop("checked")?cssElement.show():cssElement.hide()}function a(){"beach_bus"==t("select[name=_wc_trip_type] :selected").val()?t(".route").show():t(".route").hide()}function r(){var e={bus:{trips_pickup_location:!0,trips_primary_packages_tab:!0,trips_secondary_packages_tab:!0,trips_tertiary_packages_tab:!0,trips_includes_tab:!0,trips_rates_tab:!0,trips_routes_tab:!1,trips_partners_tab:!1,trips_flight_times_tab:!1,trips_pics_tab:!0,trips_to_from_beach_tab:!1,trips_videos_tab:!0},beach_bus:{trips_pickup_location:!0,trips_primary_packages_tab:!0,trips_secondary_packages_tab:!1,trips_tertiary_packages_tab:!0,trips_includes_tab:!0,trips_rates_tab:!0,trips_routes_tab:!0,trips_partners_tab:!0,trips_flight_times_tab:!1,trips_pics_tab:!0,trips_to_from_beach_tab:!0,trips_videos_tab:!0},international_flight:{trips_pickup_location:!1,trips_primary_packages_tab:!0,trips_secondary_packages_tab:!0,trips_tertiary_packages_tab:!0,trips_includes_tab:!0,trips_rates_tab:!0,trips_routes_tab:!1,trips_partners_tab:!1,trips_flight_times_tab:!0,trips_pics_tab:!0,trips_to_from_beach_tab:!1,trips_videos_tab:!0},domestic_flight:{trips_pickup_location:!1,trips_primary_packages_tab:!0,trips_secondary_packages_tab:!0,trips_tertiary_packages_tab:!0,trips_includes_tab:!0,trips_rates_tab:!0,trips_routes_tab:!1,trips_partners_tab:!1,trips_flight_times_tab:!0,trips_pics_tab:!0,trips_to_from_beach_tab:!1,trips_videos_tab:!0}}
t.each(e[t("select[name=_wc_trip_type] :selected").val()],function(e,a){a?t("."+e).show():t("."+e).hide()})}r(),a(),t("select[name=_wc_trip_type]").on("change",r),t("select[name=_wc_trip_type]").on("change",a),t("#_wc_trip_start_date, #_wc_trip_end_date").datepicker({changeMonth:!0,changeYear:!0}),t("#_wc_trip_base_price").change(function(){var t=/^\d{0,4}(\.\d{0,2})?$/.test(this.value)
this.value
t||alert("Please enter a valid price")}),t("#_wc_trip_end_date").change(function(){var e=new Date(t("#_wc_trip_start_date").val())
new Date(t(this).val())<e&&(t(this).val(""),t(this).focus(),alert("Please set an end date that is greater than or equal to the start date"))}),showHideStock("primary"),showHideStock("secondary"),showHideStock("tertiary"),t("#_wc_trip_primary_package_stock").change(function(){showHideStock("primary")}),t("#_wc_trip_secondary_package_stock").change(function(){showHideStock("secondary")}),t("#_wc_trip_tertiary_package_stock").change(function(){showHideStock("tertiary")}),e("primary"),e("secondary"),e("tertiary"),t("#_wc_trip_primary_package_optional").change(function(){e("primary")}),t("#_wc_trip_secondary_package_optional").change(function(){e("secondary")}),t("#_wc_trip_tertiary_package_optional").change(function(){e("tertiary")}),t(".add_package").click(function(){"primary_package_add"==t(this).prop("id")?(t("table.woocommerce_trip_primary_packages").append(t(this).data("row")),showHideStock("primary")):"secondary_package_add"==t(this).prop("id")?(t("table.woocommerce_trip_secondary_packages").append(t(this).data("row")),showHideStock("secondary")):"tertiary_package_add"==t(this).prop("id")?(t("table.woocommerce_trip_tertiary_packages").append(t(this).data("row")),showHideStock("tertiary")):"package_add"==t(this).prop("id")?t("table.woocommerce_trip_packages").append(t(this).data("row")):"to_from_beach_add"==t(this).prop("id")&&t("table.woocommerce_trip_to_from_beach").append(t(this).data("row")),t(".sorter:visible").size()>1&&t(".sorter:visible").css("visibility","visible")}),t("button.add_pickup").on("click",function(){t(".woocommerce_trip_pickup_locations").block({message:null,overlayCSS:{background:"#ffffff url("+wc_trips_admin_js_params.plugin_url+"/assets/images/select2-spinner.gif) no-repeat center",opacity:.6}})
var e=t(".woocommerce_trip_pickup_location").size(),a=t(".add_pickup_location_id").val(),r=""
if(!a&&!(r=prompt("New Pickup Location Name: ")))return!1
var o={action:"woocommerce_add_pickup_location",post_id:wc_trips_admin_js_params.post,pickupCount:e,new_pickup_id:a,new_pickup_name:r,nonce:wc_trips_admin_js_params.nonce_add_pickup_location}
return t.post(wc_trips_admin_js_params.ajax_url,o,function(e){e.error?(alert(e.error),t(".woocommerce_trip_pickup_locations").unblock()):(t(".woocommerce_trip_pickup_locations").append(e.html).unblock(),t(".woocommerce_trip_pickup_locations").sortable(i),a&&t(".add_pickup_location_id option[value="+a+"]").remove())}),!1}),t("button.remove_trip_pickup_location").on("click",function(e){e.preventDefault()
var a=confirm("Are you sure you want to remove this location?"),r=t(this).parent().parent()
if(a){t(r).block({message:null,overlayCSS:{background:"#ffffff url("+wc_trips_admin_js_params.plugin_url+"/assets/images/select2-spinner.gif) no-repeat center",opacity:.6}})
var i='<option value="'+t(this).attr("rel")+'">'+t(this).siblings("strong").text()+"</option>",o={action:"woocommerce_remove_pickup_location",post_id:wc_trips_admin_js_params.post,location_id:t(this).attr("rel"),nonce:wc_trips_admin_js_params.nonce_remove_pickup_location}
t.post(wc_trips_admin_js_params.ajax_url,o,function(e){e.removed?(t(".add_pickup_location_id").append(i),t(r).fadeOut("400",function(){t(r).remove()})):(t(r).unblock(),e.error&&alert(e.error))})}return!1}),t(".route").on("change",function(){var e=t(this).parent().parent()
t(e).block({message:null,overlayCSS:{background:"#ffffff url("+wc_trips_admin_js_params.plugin_url+"/assets/images/select2-spinner.gif) no-repeat center",opacity:.6}})
var a={action:"woocommerce_add_route_pickup_location",post_id:wc_trips_admin_js_params.post,location_id:t(this).attr("id"),route:t(this).val(),nonce:wc_trips_admin_js_params.none_add_route_pickup_location}
t.post(wc_trips_admin_js_params.ajax_url,a,function(a){a.changed&&t(e).unblock(),a.error&&(alert(a.error),t(e).unblock())})}),t("body").on("click","td.deleteButton",function(){return t(this).closest("tr").remove(),t(".sorter:visible").size()<=1&&t(".sorter:visible").css("visibility","hidden"),!1})
var i={items:".woocommerce_trip_pickup_location",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),pickup_row_indexes()}}
t(".woocommerce_trip_pickup_locations").sortable(i),t("#primary_package_rows, #secondary_package_rows, #tertiary_package_rows, #package_rows, #to_from_beach_rows").sortable({items:"tr",cursor:"move",axis:"y",handle:".sorter",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")}}),t(".sorter:visible").size()<=1&&t(".sorter:visible").css("visibility","hidden")})
