!function(){const{apiFetch:t,blocks:{synchronizeBlocksWithTemplate:s},components:{SelectControl:e,TextControl:o},compose:{compose:a},data:{withSelect:r,withDispatch:i,registerStore:n},date:{isInTheFuture:u},editPost:{PluginPostStatusInfo:p},element:{createElement:c,Component:l},i18n:{__:d,sprintf:h},plugins:{registerPlugin:g}}=wp,{get:w,indexOf:S,forEach:m,map:f}=lodash,P={stati:{}},T={getStati:t=>({type:"GET_STATI",stati:t}),fetchFromAPI:t=>({type:"FETCH_FROM_API",path:t})};n("wp-statuses",{reducer:(t=P,s)=>"GET_STATI"===s.type?{...t,stati:s.stati}:t,actions:T,selectors:{getStati:t=>t.stati},controls:{FETCH_FROM_API:s=>t({path:s.path})},resolvers:{*getStati(){const t=yield T.fetchFromAPI("/wp/v2/statuses?context=edit");return T.getStati(t)}}});const b=a([r((t=>{const{getEditedPostAttribute:s,getCurrentPost:e}=t("core/editor"),{getPostType:o}=t("core"),a=s("type"),r=t("wp-statuses").getStati(),i=s("custom_status");return{postType:o(a),customStatus:i,currentStatus:i&&"auto-draft"!==i?i:"draft",currentPost:e(),stati:r,password:s("password"),settings:t("core/editor").getEditorSettings()}})),i((t=>{const{editPost:s,resetEditorBlocks:e}=t("core/editor");return{onUpdateStatus:(t,e="")=>{s({custom_status:t,password:e})},insertBlocks:t=>{e(t)}}}))])(class extends l{componentDidMount(){const{settings:t,currentPost:e,customStatus:o,insertBlocks:a,onUpdateStatus:r}=this.props,{isValid:i}=this.state;if(!i&&"auto-draft"===o&&!e.content){const e=s([],t.template);e&&e.length>=1&&a(e),this.setState({isValid:!0})}}render(){const{onUpdateStatus:t,postType:s,currentPost:a,stati:r,password:i,postTitle:n,customStatus:l}=this.props;let{currentStatus:g}=this.props;const f="password"===g,P=w(a,["_links","wp:action-publish"],!1);if(u(a.date_gmt)&&"future"!==g&&(g="future",t(g)),"future"===g&&r.publish)return c(p,{className:"wp-statuses-info"},h(d('Next status will be "%s" once the scheduled date will be reached.',"wp-statuses"),r.publish.label));n!==a.title&&"auto-draft"===l&&t(g);let T=[];return s&&s.slug&&m(r,(function(t){-1===S(t.post_type,s.slug)||!P&&-1===S(["draft","pending"],t.slug)||T.push({label:t.label,value:t.slug})})),c(p,{className:"wp-statuses-info"},c(e,{label:d("Status","wp-statuses"),value:g,onChange:s=>t(s),options:T}),f&&c(o,{label:d("Password","wp-statuses"),value:i,className:"wp-statuses-password",onChange:s=>t(g,s)}))}constructor(){super(...arguments),this.state={isValid:!1}}});g("wp-statuses-sidebar",{render:b})}();
//# sourceMappingURL=sidebar.js.map
