/*! wp-statuses - v1.2.0 - 2017-03-04 1:35:16 PM UTC - https://github.com/imath/wp-statuses */
window.wp=window.wp||{},function(a){if("undefined"!=typeof wpStatuses&&"undefined"!=typeof postL10n){var b={init:function(){this.publishingBox=a("#wp-statuses-publish-box"),this.timeStampDiv=a("#timestampdiv"),this.majorSubmitName=a("#publish").prop("name"),this.setListeners()},setListeners:function(){this.publishingBox.on("change","#wp-statuses-dropdown",this.updateStatus.bind(this)),this.publishingBox.on("click",".edit-timestamp, .cancel-timestamp, .save-timestamp",this.editTimestamp.bind(this)),a("#post").on("submit",this.submitForm.bind(this))},updateStatus:function(b){var c=a(b.currentTarget).find(":selected").data("dashicon"),d=a(b.currentTarget).parent().find(".dashicons"),e=a(b.currentTarget).find(":selected").data("status");c||(c="dashicons-post-status"),d.prop("class","").addClass("dashicons"),d.addClass(c),this.setStatusAttributes(e),"password"===e&&(e="publish",a("#wp-statuses-dropdown :selected").prop("value",e)),a("#wp-statuses-status").val(e),this.updateText()},setStatusAttributes:function(b){a.each(a("#wp-statuses-attibutes input"),function(b,c){"checkbox"===c.type||"radio"===c.type?a(c).prop("checked",!1):"text"===c.type&&a(c).val(""),a(c).parent(".wp-statuses-attribute-container").addClass("hide-if-js")}),"password"===b||b===wpStatuses.status&&wpStatuses.attributes.password?(a("#password-span").removeClass("hide-if-js"),wpStatuses.attributes.password&&a("#post_password").val(wpStatuses.attributes.password)):-1!==a.inArray(b,wpStatuses.public_statuses)&&(a("#sticky-span").removeClass("hide-if-js"),wpStatuses.attributes.sticky&&a("#sticky").prop("checked",wpStatuses.attributes.sticky))},updateText:function(){var b,c,d,e,f,g,h,i={aa:parseInt(a("#aa").val(),10),mm:parseInt(a("#mm").val(),10)-1,jj:parseInt(a("#jj").val(),10),hh:parseInt(a("#hh").val(),10),mn:parseInt(a("#mn").val(),10)},j=a("#wp-statuses-dropdown").val(),k=a("#wp-statuses-dropdown :selected").data("status"),l=a("#original_post_status").val();if(!this.timeStampDiv.length)return!0;if(c=new Date(i.aa,i.mm,i.jj,i.hh,i.mn),b=new Date(a("#cur_aa").val(),a("#cur_mm").val()-1,a("#cur_jj").val(),a("#cur_hh").val(),a("#cur_mn").val()),d=new Date(a("#hidden_aa").val(),a("#hidden_mm").val()-1,a("#hidden_jj").val(),a("#hidden_hh").val(),a("#hidden_mn").val()),c.getFullYear()!==i.aa||c.getMonth()!==i.mm||c.getDate()!==i.jj||c.getMinutes()!==i.mn)return this.timeStampDiv.find(".timestamp-wrap").addClass("form-invalid"),!1;if(this.timeStampDiv.find(".timestamp-wrap").removeClass("form-invalid"),a("#publish").prop("name",this.majorSubmitName),f=c-b,f>0&&-1!==a.inArray(j,["draft","pending","publish"])?(e=postL10n.publishOnFuture,a("#publish").val(postL10n.schedule),a("#publish").prop("name","publish"),"password"===k&&a("#wp-statuses-dropdown :selected").prop("value","future")):f<=0&&-1!==a.inArray(j,["draft","pending","publish","future"])&&("publish"!==l||"publish"===l&&-1!==a.inArray(j,["draft","pending"]))?(e=postL10n.publishOn,a("#publish").val(postL10n.publish),a("#publish").prop("name","publish"),"password"===k&&a("#wp-statuses-dropdown :selected").prop("value","publish")):(e=postL10n.publishOnPast,a("#publish").val(postL10n.update),-1===a.inArray(j,["draft","pending","publish","future"])&&(a("#publish").prop("name","save"),e=wpStatuses.strings.labels[k].metabox_save_on,a("#publish").val(wpStatuses.strings.labels[k].metabox_submit))),d.toUTCString()===c.toUTCString()&&(e=wpStatuses.strings.labels[k].metabox_save_on,(f<=0||l===j)&&(e=wpStatuses.strings.labels[k].metabox_saved_on),-1!==a.inArray(l,["draft","auto-draft"])&&(a("#timestamp").html("\n"+wpStatuses.strings.labels[k].metabox_save_now),e=!1)),e&&(g=i.mm+1,h=i.jj,1===g.toString().length&&(g="0"+g),1===h.toString().length&&(h="0"+h),a("#timestamp").html("\n"+e+" <b>"+postL10n.dateFormat.replace("%1$s",a('option[value="'+g+'"]',"#mm").data("text")).replace("%2$s",h).replace("%3$s",i.aa).replace("%4$s",("00"+i.hh.toString()).slice(-2)).replace("%5$s",("00"+i.mn.toString()).slice(-2))+"</b> ")),"pending"===j||"draft"===j){var m="pending"===j?postL10n.savePending:postL10n.saveDraft;a("#save-post").length?a("#save-post").show().val(m):a("#save-action").prepend(a("<input></input>").val(m).prop({type:"submit",name:"save",id:"save-post"}).addClass("button")),a("#post-preview").html(wpStatuses.strings.preview)}else a("#save-post").hide(),"publish"===l&&a("#post-preview").html(wpStatuses.strings.previewChanges);return!0},editTimestamp:function(b){var c=a(b.currentTarget),d=this.timeStampDiv;if(b.preventDefault(),d.hasClass("hide-if-js"))d.slideDown("fast",function(){a("input, select",d.find(".timestamp-wrap")).first().focus()}).removeClass("hide-if-js"),c.hide();else{c.hasClass("cancel-timestamp")&&a.each(d.find('[type="hidden"]'),function(b,c){var d=a(c).prop("id").replace("hidden_","#");0===d.indexOf("#")&&a(d).val(a(c).val())});var e=this.updateText();if(!0!==e&&c.hasClass("save-timestamp"))return;d.slideUp("fast").siblings("a.edit-timestamp").show().focus(),d.addClass("hide-if-js")}},submitForm:function(b){return!0===this.updateText()?b:(b.preventDefault(),this.timeStampDiv.show(),wp.autosave&&wp.autosave.enableButtons(),void a("#publishing-action .spinner").removeClass("is-active"))}};a(document).ready(function(){b.init()})}}(jQuery);