(()=>{"use strict";const e=window.wp.i18n,t="woocommerce-google-analytics",o="experimental__woocommerce_blocks",c=window.wp.hooks,r=(e,t)=>({id:s(e),name:e.name,quantity:t,category:l(e),price:i(e.prices.price,e.prices.currency_minor_unit)}),n=(e,t)=>({id:s(e),name:e.name,list_name:t,category:l(e),price:i(e.prices.price,e.prices.currency_minor_unit)}),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(parseInt(e,10)/10**t).toString()},a=(e,t,o)=>{(0,c.removeAction)(e,t),(0,c.addAction)(e,t,o)},s=e=>e.sku?e.sku:"#"+e.id,l=e=>"categories"in e&&e.categories.length?e.categories[0].name:"";let m=-1;const u=e=>t=>{let{storeCart:o}=t;m!==e&&(_(0===e?"begin_checkout":"checkout_progress",{items:o.cartItems.map(r),coupon:o.cartCoupons[0]?.code||"",currency:o.cartTotals.currency_code,value:i(o.cartTotals.total_price,o.cartTotals.currency_minor_unit),checkout_step:e}),m=e)},p=e=>{let{step:t,option:o,value:c}=e;return()=>{_("set_checkout_option",{checkout_step:t,checkout_option:o,value:c}),m=t}},_=(e,t)=>{if("function"!=typeof gtag)throw new Error("Function gtag not implemented.");window.gtag("event",e,t)};a(`${o}-checkout-render-checkout-form`,t,(e=>{let{...t}=e;return u(0)(t)})),a(`${o}-checkout-set-email-address`,t,(e=>{let{...t}=e;return u(1)(t)})),a(`${o}-checkout-set-shipping-address`,t,(e=>{let{...t}=e;return u(2)(t)})),a(`${o}-checkout-set-billing-address`,t,(e=>{let{...t}=e;return u(3)(t)})),a(`${o}-checkout-set-phone-number`,t,(e=>{let{step:t,...o}=e;u("shipping"===t?2:3)(o)})),a(`${o}-checkout-set-selected-shipping-rate`,t,(t=>{let{shippingRateId:o}=t;p({step:4,option:(0,e.__)("Shipping Method","woo-gutenberg-products-block"),value:o})()})),a(`${o}-checkout-set-active-payment-method`,t,(t=>{let{paymentMethodSlug:o}=t;p({step:5,option:(0,e.__)("Payment Method","woo-gutenberg-products-block"),value:o})()})),a(`${o}-product-list-render`,t,(t=>{let{products:o,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=t;_("view_item_list",{event_category:"engagement",event_label:(0,e.__)("Viewing products","woocommerce-google-analytics-integration"),items:o.map(((e,t)=>({...n(e,c),list_position:t+1})))})})),a(`${o}-cart-add-item`,t,(t=>{let{product:o,quantity:c=1}=t;_("add_to_cart",{event_category:"ecommerce",event_label:(0,e.__)("Add to Cart","woocommerce-google-analytics-integration"),items:[r(o,c)]})})),a(`${o}-cart-set-item-quantity`,t,(t=>{let{product:o,quantity:c=1}=t;_("change_cart_quantity",{event_category:"ecommerce",event_label:(0,e.__)("Change Cart Item Quantity","woocommerce-google-analytics-integration"),items:[r(o,c)]})})),a(`${o}-cart-remove-item`,t,(t=>{let{product:o,quantity:c=1}=t;_("remove_from_cart",{event_category:"ecommerce",event_label:(0,e.__)("Remove Cart Item","woocommerce-google-analytics-integration"),items:[r(o,c)]})})),a(`${o}-checkout-submit`,t,(()=>{_("add_payment_info")})),a(`${o}-product-view-link`,t,(t=>{let{product:o,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=t;_("select_content",{content_type:"product",items:[n(o,c)]})})),a(`${o}-product-search`,t,(e=>{let{searchTerm:t}=e;_("search",{search_term:t})})),a(`${o}-product-render`,t,(t=>{let{product:o,listName:c=(0,e.__)("Product List","woocommerce-google-analytics-integration")}=t;o&&_("view_item",{items:[n(o,c)]})})),a(`${o}-store-notice-create`,t,(e=>{let{status:t,content:o}=e;"error"===t&&_("exception",{description:o,fatal:!1})}))})();